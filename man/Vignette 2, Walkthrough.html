<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />

<meta name="author" content="Dr Annie Visser-Quinn, a.visser-quinn@hw.ac.uk" />

<meta name="date" content="2020-08-11" />

<title>OSMtidy - Vignette 2, Walkthrough</title>

<script>// Hide empty <a> tag within highlighted CodeBlock for screen reader accessibility (see https://github.com/jgm/pandoc/issues/6352#issuecomment-626106786) -->
// v0.0.1
// Written by JooYoung Seo (jooyoung@psu.edu) and Atsushi Yasumoto on June 1st, 2020.

document.addEventListener('DOMContentLoaded', function() {
  const codeList = document.getElementsByClassName("sourceCode");
  for (var i = 0; i < codeList.length; i++) {
    var linkList = codeList[i].getElementsByTagName('a');
    for (var j = 0; j < linkList.length; j++) {
      if (linkList[j].innerHTML === "") {
        linkList[j].setAttribute('aria-hidden', 'true');
      }
    }
  }
});
</script>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>



<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">OSMtidy - Vignette 2, Walkthrough</h1>
<h4 class="author">Dr Annie Visser-Quinn, <a href="mailto:a.visser-quinn@hw.ac.uk" class="email">a.visser-quinn@hw.ac.uk</a></h4>
<h4 class="date">2020-08-11</h4>


<div id="TOC">
<ul>
<li><a href="#prerequisites">1. Prerequisites</a></li>
<li><a href="#set-up">2. Set-up</a></li>
<li><a href="#using-osmtidy">3. Using OSMtidy</a><ul>
<li><a href="#input-shapefile">3.1. Input shapefile</a></li>
<li><a href="#extract-osm-data-via-the-r-package-osmdata">3.2. Extract OSM data via the R package osmdata</a></li>
<li><a href="#cut-out-data">3.3. Cut out data</a></li>
<li><a href="#data-wrangling">3.4. Data wrangling</a></li>
<li><a href="#data-filtering">3.5. Data filtering</a></li>
<li><a href="#data-tidy">3.6. Data tidy</a></li>
</ul></li>
</ul>
</div>

<div id="prerequisites" class="section level2">
<h2>1. Prerequisites</h2>
<ul>
<li>OSMtidy V0.0.41</li>
<li>An input shapefile - see Vignette 1 for a guide to getting started</li>
<li>R version 3.6.3 or newer</li>
<li>R packages <code>tidyverse</code>, <code>lubridate</code>, <code>osmdata</code>, <code>sf</code>, <code>mapedit</code>, <code>pbapply</code>, <code>progress</code>, <code>data.table</code>, <code>readxl</code> and <code>openxlsx</code></li>
</ul>
</div>
<div id="set-up" class="section level2">
<h2>2. Set-up</h2>
<p>To use OSMtidy, you should save your R script within the OSMtidy directory. Set up your R script by (1) clearing the environment and console, (2) setting the working directory to your script directory, and (3) loading the required packages.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="co"># Prepare the environment</span></span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="kw">rm</span>(<span class="dt">list =</span> <span class="kw">ls</span>()); <span class="kw">cat</span>(<span class="st">&quot;/014&quot;</span>); <span class="kw">gc</span>() </span>
<span id="cb1-3"><a href="#cb1-3"></a></span>
<span id="cb1-4"><a href="#cb1-4"></a><span class="co"># Set working directory to the script&#39;s folder</span></span>
<span id="cb1-5"><a href="#cb1-5"></a><span class="kw">setwd</span>(<span class="kw">dirname</span>(rstudioapi<span class="op">::</span><span class="kw">getSourceEditorContext</span>()<span class="op">$</span>path))</span>
<span id="cb1-6"><a href="#cb1-6"></a></span>
<span id="cb1-7"><a href="#cb1-7"></a><span class="co"># Load the required packages</span></span>
<span id="cb1-8"><a href="#cb1-8"></a><span class="kw">library</span>(tidyverse)</span>
<span id="cb1-9"><a href="#cb1-9"></a><span class="kw">library</span>(lubridate)</span>
<span id="cb1-10"><a href="#cb1-10"></a><span class="kw">library</span>(osmdata)</span>
<span id="cb1-11"><a href="#cb1-11"></a><span class="kw">library</span>(sf)</span>
<span id="cb1-12"><a href="#cb1-12"></a><span class="kw">library</span>(pbapply)</span>
<span id="cb1-13"><a href="#cb1-13"></a><span class="kw">library</span>(progress)</span>
<span id="cb1-14"><a href="#cb1-14"></a><span class="kw">library</span>(data.table)</span>
<span id="cb1-15"><a href="#cb1-15"></a><span class="kw">library</span>(readxl)</span>
<span id="cb1-16"><a href="#cb1-16"></a><span class="kw">library</span>(openxlsx)</span></code></pre></div>
<p><br></p>
<p>The functions that make up OSMtidy are located in the <em>functions</em> folder. You can load all of them in by running the script in <em>functions.R</em>; in the code chunk below, <code>ls()</code> prints the names of the functions loaded into the environment.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a><span class="kw">source</span>(<span class="st">&quot;functions/functions.R&quot;</span>)</span>
<span id="cb2-2"><a href="#cb2-2"></a></span>
<span id="cb2-3"><a href="#cb2-3"></a><span class="kw">ls</span>()</span>
<span id="cb2-4"><a href="#cb2-4"></a><span class="co">#&gt;  [1] &quot;cookieCutter&quot;   &quot;dataCut&quot;        &quot;dataExport&quot;     &quot;dataExtract&quot;   </span></span>
<span id="cb2-5"><a href="#cb2-5"></a><span class="co">#&gt;  [5] &quot;dataFilter&quot;     &quot;dataShapefile&quot;  &quot;dataSummary&quot;    &quot;dataTidy&quot;      </span></span>
<span id="cb2-6"><a href="#cb2-6"></a><span class="co">#&gt;  [9] &quot;dataWrangle&quot;    &quot;filterOverview&quot;</span></span></code></pre></div>
</div>
<div id="using-osmtidy" class="section level2">
<h2>3. Using OSMtidy</h2>
<div id="input-shapefile" class="section level3">
<h3>3.1. Input shapefile</h3>
<p>Using the function <code>dataShapefile()</code> we can import the shapefile for which data is to be extracted. There are two input arguments:</p>
<ul>
<li><em>name</em> This is the location name. This should be the same as the name of the shapefile in the shapefiles folder (without the .shp file extension)</li>
<li><em>crs</em> Coordinate projection, optional. The function automatically converts to EPSG:4326 (<a href="https://epsg.io/4326" class="uri">https://epsg.io/4326</a>).</li>
</ul>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a>locationName &lt;-<span class="st"> &quot;exampleEdinburgh&quot;</span></span>
<span id="cb3-2"><a href="#cb3-2"></a></span>
<span id="cb3-3"><a href="#cb3-3"></a>shp &lt;-<span class="st"> </span><span class="kw">dataShapefile</span>(<span class="dt">name =</span> locationName)</span></code></pre></div>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a>shp</span>
<span id="cb4-2"><a href="#cb4-2"></a><span class="co">#&gt; Simple feature collection with 1 feature and 0 fields</span></span>
<span id="cb4-3"><a href="#cb4-3"></a><span class="co">#&gt; geometry type:  POLYGON</span></span>
<span id="cb4-4"><a href="#cb4-4"></a><span class="co">#&gt; dimension:      XY</span></span>
<span id="cb4-5"><a href="#cb4-5"></a><span class="co">#&gt; bbox:           xmin: -3.199973 ymin: 55.95726 xmax: -3.162921 ymax: 55.97507</span></span>
<span id="cb4-6"><a href="#cb4-6"></a><span class="co">#&gt; geographic CRS: WGS 84</span></span>
<span id="cb4-7"><a href="#cb4-7"></a><span class="co">#&gt;                         geometry</span></span>
<span id="cb4-8"><a href="#cb4-8"></a><span class="co">#&gt; 1 POLYGON ((-3.162921 55.9633...</span></span></code></pre></div>
<p><br></p>
<p>At each step, you can print a summary of the OSMtidy outputs using the function <code>dataSummary()</code>.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a>shp <span class="op">%&gt;%</span><span class="st"> </span>dataSummary</span>
<span id="cb5-2"><a href="#cb5-2"></a><span class="co">#&gt; $class</span></span>
<span id="cb5-3"><a href="#cb5-3"></a><span class="co">#&gt; [1] &quot;sf&quot;                &quot;data.frame&quot;        &quot;OSMtidy_dataInput&quot;</span></span>
<span id="cb5-4"><a href="#cb5-4"></a><span class="co">#&gt; </span></span>
<span id="cb5-5"><a href="#cb5-5"></a><span class="co">#&gt; $shapeProjection</span></span>
<span id="cb5-6"><a href="#cb5-6"></a><span class="co">#&gt; Coordinate Reference System:</span></span>
<span id="cb5-7"><a href="#cb5-7"></a><span class="co">#&gt;   User input: WGS 84 </span></span>
<span id="cb5-8"><a href="#cb5-8"></a><span class="co">#&gt;   wkt:</span></span>
<span id="cb5-9"><a href="#cb5-9"></a><span class="co">#&gt; GEOGCRS[&quot;WGS 84&quot;,</span></span>
<span id="cb5-10"><a href="#cb5-10"></a><span class="co">#&gt;     DATUM[&quot;World Geodetic System 1984&quot;,</span></span>
<span id="cb5-11"><a href="#cb5-11"></a><span class="co">#&gt;         ELLIPSOID[&quot;WGS 84&quot;,6378137,298.257223563,</span></span>
<span id="cb5-12"><a href="#cb5-12"></a><span class="co">#&gt;             LENGTHUNIT[&quot;metre&quot;,1]]],</span></span>
<span id="cb5-13"><a href="#cb5-13"></a><span class="co">#&gt;     PRIMEM[&quot;Greenwich&quot;,0,</span></span>
<span id="cb5-14"><a href="#cb5-14"></a><span class="co">#&gt;         ANGLEUNIT[&quot;degree&quot;,0.0174532925199433]],</span></span>
<span id="cb5-15"><a href="#cb5-15"></a><span class="co">#&gt;     CS[ellipsoidal,2],</span></span>
<span id="cb5-16"><a href="#cb5-16"></a><span class="co">#&gt;         AXIS[&quot;latitude&quot;,north,</span></span>
<span id="cb5-17"><a href="#cb5-17"></a><span class="co">#&gt;             ORDER[1],</span></span>
<span id="cb5-18"><a href="#cb5-18"></a><span class="co">#&gt;             ANGLEUNIT[&quot;degree&quot;,0.0174532925199433]],</span></span>
<span id="cb5-19"><a href="#cb5-19"></a><span class="co">#&gt;         AXIS[&quot;longitude&quot;,east,</span></span>
<span id="cb5-20"><a href="#cb5-20"></a><span class="co">#&gt;             ORDER[2],</span></span>
<span id="cb5-21"><a href="#cb5-21"></a><span class="co">#&gt;             ANGLEUNIT[&quot;degree&quot;,0.0174532925199433]],</span></span>
<span id="cb5-22"><a href="#cb5-22"></a><span class="co">#&gt;     ID[&quot;EPSG&quot;,4326]]</span></span>
<span id="cb5-23"><a href="#cb5-23"></a><span class="co">#&gt; </span></span>
<span id="cb5-24"><a href="#cb5-24"></a><span class="co">#&gt; $shapeArea</span></span>
<span id="cb5-25"><a href="#cb5-25"></a><span class="co">#&gt; 2678291 [m^2]</span></span>
<span id="cb5-26"><a href="#cb5-26"></a><span class="co">#&gt; </span></span>
<span id="cb5-27"><a href="#cb5-27"></a><span class="co">#&gt; $shapePerimeter</span></span>
<span id="cb5-28"><a href="#cb5-28"></a><span class="co">#&gt; 9150.657 [m]</span></span>
<span id="cb5-29"><a href="#cb5-29"></a><span class="co">#&gt; </span></span>
<span id="cb5-30"><a href="#cb5-30"></a><span class="co">#&gt; $shapePlot</span></span></code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
<p><br></p>
<p>You can also export any OSMtidy output using the function <code>dataExport()</code>. All outputs are time stamped and saved in the outputs folder within the OSMtidy directory.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a><span class="kw">dataExport</span>(<span class="dt">data =</span> shp, <span class="dt">name =</span> locationName)</span>
<span id="cb6-2"><a href="#cb6-2"></a><span class="co">#&gt; File saved as: outputs/exampleEdinburgh_1_dataInput_20200811-155038.RDS</span></span></code></pre></div>
</div>
<div id="extract-osm-data-via-the-r-package-osmdata" class="section level3">
<h3>3.2. Extract OSM data via the R package osmdata</h3>
<p>The OpenStreetMap data is extracted, via the R package osmdata and the overpass server, using the function <code>dataExtract()</code>. Timestamps and progress are printed while the function is running.</p>
<p>OSMtidy V0.0.41 extracts 47 of 209 available features in osmdata. To change the features extracted, add or delete lines in <code>functions/features.txt</code>. A list of the available features in osmdata can be accessed via the function <code>osmdata::available_features</code>.</p>
<p>The function <code>dataExtract()</code> has three input arguments:</p>
<ul>
<li><em>dataShapefile</em> The output from 3.1 (step 1)</li>
<li><em>timeout</em> The time in seconds before the query to the overpass server will time out; see DETAILS below
<ul>
<li>Default 300 seconds</li>
</ul></li>
<li><em>memsize</em> The memory size for the overpass server; see DETAILS below
<ul>
<li>Default 1073741824 Bytes</li>
</ul></li>
</ul>
<div id="details-from-the-r-package-osmdata" class="section level4">
<h4>3.2.1 DETAILS from the R package osmdata</h4>
<blockquote>
<p><strong>timeout</strong> It may be necessary to increase this value for large queries, because the server may time out before all data are delivered. <strong>memsize</strong> The default memory size for the ‘overpass’ server in bytes; may need to be increased in order to handle large queries.&gt; See <a href="https://wiki.openstreetmap.org/wiki/Overpass_API#Resource_management_options_.28osm-script.29" class="uri">https://wiki.openstreetmap.org/wiki/Overpass_API#Resource_management_options_.28osm-script.29</a> for explanation of timeout and memsize (or maxsize in overpass terms). Note in particular the comment that queries with arbitrarily large memsize are likely to be rejected.</p>
</blockquote>
<p><br></p>
<p>The code chunk below is not run. This is because (1) the data extraction may take some time depending on the size of the area; and (2), to avoid flooding the overpass server.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a>dlExtract &lt;-<span class="st"> </span><span class="kw">dataExtract</span>(<span class="dt">dataShapefile =</span> shp)</span></code></pre></div>
<p><br></p>
<p>The output can be interrogated and exported, using the functions <code>dataSummary()</code> and <code>dataExport()</code> respectively, as before.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a>dlExtract <span class="op">%&gt;%</span><span class="st"> </span>dataSummary</span>
<span id="cb8-2"><a href="#cb8-2"></a><span class="co">#&gt; `summarise()` ungrouping output (override with `.groups` argument)</span></span>
<span id="cb8-3"><a href="#cb8-3"></a><span class="co">#&gt; `summarise()` ungrouping output (override with `.groups` argument)</span></span>
<span id="cb8-4"><a href="#cb8-4"></a><span class="co">#&gt; $class</span></span>
<span id="cb8-5"><a href="#cb8-5"></a><span class="co">#&gt; [1] &quot;list&quot;                &quot;OSMtidy_dataExtract&quot;</span></span>
<span id="cb8-6"><a href="#cb8-6"></a><span class="co">#&gt; </span></span>
<span id="cb8-7"><a href="#cb8-7"></a><span class="co">#&gt; $byGeometry</span></span>
<span id="cb8-8"><a href="#cb8-8"></a><span class="co">#&gt;            type  total</span></span>
<span id="cb8-9"><a href="#cb8-9"></a><span class="co">#&gt; 1         lines   7779</span></span>
<span id="cb8-10"><a href="#cb8-10"></a><span class="co">#&gt; 2    multilines      1</span></span>
<span id="cb8-11"><a href="#cb8-11"></a><span class="co">#&gt; 3 multipolygons     27</span></span>
<span id="cb8-12"><a href="#cb8-12"></a><span class="co">#&gt; 4        points 130481</span></span>
<span id="cb8-13"><a href="#cb8-13"></a><span class="co">#&gt; 5      polygons  12320</span></span>
<span id="cb8-14"><a href="#cb8-14"></a><span class="co">#&gt; </span></span>
<span id="cb8-15"><a href="#cb8-15"></a><span class="co">#&gt; $byFeature</span></span>
<span id="cb8-16"><a href="#cb8-16"></a><span class="co">#&gt;                  feature total</span></span>
<span id="cb8-17"><a href="#cb8-17"></a><span class="co">#&gt; 1                amenity  6843</span></span>
<span id="cb8-18"><a href="#cb8-18"></a><span class="co">#&gt; 2                barrier 21130</span></span>
<span id="cb8-19"><a href="#cb8-19"></a><span class="co">#&gt; 3                 bridge    99</span></span>
<span id="cb8-20"><a href="#cb8-20"></a><span class="co">#&gt; 4               building 56467</span></span>
<span id="cb8-21"><a href="#cb8-21"></a><span class="co">#&gt; 5                  craft    45</span></span>
<span id="cb8-22"><a href="#cb8-22"></a><span class="co">#&gt; 6               cycleway   164</span></span>
<span id="cb8-23"><a href="#cb8-23"></a><span class="co">#&gt; 7             dispensing     4</span></span>
<span id="cb8-24"><a href="#cb8-24"></a><span class="co">#&gt; 8              emergency   137</span></span>
<span id="cb8-25"><a href="#cb8-25"></a><span class="co">#&gt; 9       generator:method    64</span></span>
<span id="cb8-26"><a href="#cb8-26"></a><span class="co">#&gt; 10      generator:source   245</span></span>
<span id="cb8-27"><a href="#cb8-27"></a><span class="co">#&gt; 11            healthcare    65</span></span>
<span id="cb8-28"><a href="#cb8-28"></a><span class="co">#&gt; 12 healthcare:speciality     1</span></span>
<span id="cb8-29"><a href="#cb8-29"></a><span class="co">#&gt; 13               highway 14028</span></span>
<span id="cb8-30"><a href="#cb8-30"></a><span class="co">#&gt; 14              historic    75</span></span>
<span id="cb8-31"><a href="#cb8-31"></a><span class="co">#&gt; 15               landuse 10819</span></span>
<span id="cb8-32"><a href="#cb8-32"></a><span class="co">#&gt; 16               leisure 26030</span></span>
<span id="cb8-33"><a href="#cb8-33"></a><span class="co">#&gt; 17              military     1</span></span>
<span id="cb8-34"><a href="#cb8-34"></a><span class="co">#&gt; 18               natural  9605</span></span>
<span id="cb8-35"><a href="#cb8-35"></a><span class="co">#&gt; 19                office   195</span></span>
<span id="cb8-36"><a href="#cb8-36"></a><span class="co">#&gt; 20                 power   342</span></span>
<span id="cb8-37"><a href="#cb8-37"></a><span class="co">#&gt; 21      public_transport    78</span></span>
<span id="cb8-38"><a href="#cb8-38"></a><span class="co">#&gt; 22               railway   459</span></span>
<span id="cb8-39"><a href="#cb8-39"></a><span class="co">#&gt; 23        recycling_type    36</span></span>
<span id="cb8-40"><a href="#cb8-40"></a><span class="co">#&gt; 24           residential    65</span></span>
<span id="cb8-41"><a href="#cb8-41"></a><span class="co">#&gt; 25               service  1670</span></span>
<span id="cb8-42"><a href="#cb8-42"></a><span class="co">#&gt; 26                  shop   729</span></span>
<span id="cb8-43"><a href="#cb8-43"></a><span class="co">#&gt; 27       social_facility   202</span></span>
<span id="cb8-44"><a href="#cb8-44"></a><span class="co">#&gt; 28            substation   121</span></span>
<span id="cb8-45"><a href="#cb8-45"></a><span class="co">#&gt; 29       traffic_calming    58</span></span>
<span id="cb8-46"><a href="#cb8-46"></a><span class="co">#&gt; 30                 usage    54</span></span>
<span id="cb8-47"><a href="#cb8-47"></a><span class="co">#&gt; 31               vending     2</span></span>
<span id="cb8-48"><a href="#cb8-48"></a><span class="co">#&gt; 32               voltage    78</span></span>
<span id="cb8-49"><a href="#cb8-49"></a><span class="co">#&gt; 33                 water   696</span></span>
<span id="cb8-50"><a href="#cb8-50"></a><span class="co">#&gt; 34             wholesale     1</span></span>
<span id="cb8-51"><a href="#cb8-51"></a></span>
<span id="cb8-52"><a href="#cb8-52"></a><span class="kw">dataExport</span>(<span class="dt">data =</span> dlExtract, <span class="dt">name =</span> locationName)</span>
<span id="cb8-53"><a href="#cb8-53"></a><span class="co">#&gt; File saved as: outputs/exampleEdinburgh_2_dataExtract_20200811-155039.RDS</span></span></code></pre></div>
</div>
</div>
<div id="cut-out-data" class="section level3">
<h3>3.3. Cut out data</h3>
<p>In 3.2 (step 2), the data was extracted as a “bounding box” (a rectangle). In step 3, the data is cut to the shapefile using the function <code>dataCut()</code>. Timestamps and progress are printed when the function is running. The function <code>dataCut</code> has two input arguments:</p>
<ul>
<li><strong>dataExtracted</strong> Output from 3.2 (step 2)</li>
<li><strong>dataShapefile</strong> Output from 3.1 (step 1)</li>
</ul>
<p>Outputs can be interrogated and exported as before.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a>dlCut &lt;-<span class="st"> </span><span class="kw">dataCut</span>(<span class="dt">dataExtracted =</span> dlExtract, <span class="dt">dataShapefile =</span> shp)</span>
<span id="cb9-2"><a href="#cb9-2"></a><span class="co">#&gt; 15:50:41 Step one of four</span></span>
<span id="cb9-3"><a href="#cb9-3"></a><span class="co">#&gt; 15:50:41 Step two of four</span></span>
<span id="cb9-4"><a href="#cb9-4"></a><span class="co">#&gt; 15:50:45 Step three of four</span></span>
<span id="cb9-5"><a href="#cb9-5"></a><span class="co">#&gt; 15:50:47 Step four of four</span></span>
<span id="cb9-6"><a href="#cb9-6"></a><span class="co">#&gt; 15:50:47 Complete, preparing output</span></span>
<span id="cb9-7"><a href="#cb9-7"></a></span>
<span id="cb9-8"><a href="#cb9-8"></a>dlCut <span class="op">%&gt;%</span><span class="st"> </span>dataSummary</span>
<span id="cb9-9"><a href="#cb9-9"></a><span class="co">#&gt; `summarise()` ungrouping output (override with `.groups` argument)</span></span>
<span id="cb9-10"><a href="#cb9-10"></a><span class="co">#&gt; `summarise()` ungrouping output (override with `.groups` argument)</span></span>
<span id="cb9-11"><a href="#cb9-11"></a><span class="co">#&gt; $class</span></span>
<span id="cb9-12"><a href="#cb9-12"></a><span class="co">#&gt; [1] &quot;list&quot;            &quot;OSMtidy_dataCut&quot;</span></span>
<span id="cb9-13"><a href="#cb9-13"></a><span class="co">#&gt; </span></span>
<span id="cb9-14"><a href="#cb9-14"></a><span class="co">#&gt; $byGeometry</span></span>
<span id="cb9-15"><a href="#cb9-15"></a><span class="co">#&gt;              type total</span></span>
<span id="cb9-16"><a href="#cb9-16"></a><span class="co">#&gt; 1      linestring  4457</span></span>
<span id="cb9-17"><a href="#cb9-17"></a><span class="co">#&gt; 2 multilinestring     5</span></span>
<span id="cb9-18"><a href="#cb9-18"></a><span class="co">#&gt; 3    multipolygon    32</span></span>
<span id="cb9-19"><a href="#cb9-19"></a><span class="co">#&gt; 4           point 73727</span></span>
<span id="cb9-20"><a href="#cb9-20"></a><span class="co">#&gt; 5         polygon  7460</span></span>
<span id="cb9-21"><a href="#cb9-21"></a><span class="co">#&gt; </span></span>
<span id="cb9-22"><a href="#cb9-22"></a><span class="co">#&gt; $byFeature</span></span>
<span id="cb9-23"><a href="#cb9-23"></a><span class="co">#&gt;                  feature total</span></span>
<span id="cb9-24"><a href="#cb9-24"></a><span class="co">#&gt; 1                amenity  3789</span></span>
<span id="cb9-25"><a href="#cb9-25"></a><span class="co">#&gt; 2                barrier 12000</span></span>
<span id="cb9-26"><a href="#cb9-26"></a><span class="co">#&gt; 3                 bridge    67</span></span>
<span id="cb9-27"><a href="#cb9-27"></a><span class="co">#&gt; 4               building 32814</span></span>
<span id="cb9-28"><a href="#cb9-28"></a><span class="co">#&gt; 5                  craft    29</span></span>
<span id="cb9-29"><a href="#cb9-29"></a><span class="co">#&gt; 6               cycleway   110</span></span>
<span id="cb9-30"><a href="#cb9-30"></a><span class="co">#&gt; 7             dispensing     2</span></span>
<span id="cb9-31"><a href="#cb9-31"></a><span class="co">#&gt; 8              emergency    66</span></span>
<span id="cb9-32"><a href="#cb9-32"></a><span class="co">#&gt; 9       generator:method    64</span></span>
<span id="cb9-33"><a href="#cb9-33"></a><span class="co">#&gt; 10      generator:source   215</span></span>
<span id="cb9-34"><a href="#cb9-34"></a><span class="co">#&gt; 11            healthcare    17</span></span>
<span id="cb9-35"><a href="#cb9-35"></a><span class="co">#&gt; 12 healthcare:speciality     1</span></span>
<span id="cb9-36"><a href="#cb9-36"></a><span class="co">#&gt; 13               highway  6878</span></span>
<span id="cb9-37"><a href="#cb9-37"></a><span class="co">#&gt; 14              historic    44</span></span>
<span id="cb9-38"><a href="#cb9-38"></a><span class="co">#&gt; 15               landuse  6591</span></span>
<span id="cb9-39"><a href="#cb9-39"></a><span class="co">#&gt; 16               leisure 14851</span></span>
<span id="cb9-40"><a href="#cb9-40"></a><span class="co">#&gt; 17              military     1</span></span>
<span id="cb9-41"><a href="#cb9-41"></a><span class="co">#&gt; 18               natural  5301</span></span>
<span id="cb9-42"><a href="#cb9-42"></a><span class="co">#&gt; 19                office   109</span></span>
<span id="cb9-43"><a href="#cb9-43"></a><span class="co">#&gt; 20                 power   222</span></span>
<span id="cb9-44"><a href="#cb9-44"></a><span class="co">#&gt; 21      public_transport    37</span></span>
<span id="cb9-45"><a href="#cb9-45"></a><span class="co">#&gt; 22               railway   200</span></span>
<span id="cb9-46"><a href="#cb9-46"></a><span class="co">#&gt; 23        recycling_type    23</span></span>
<span id="cb9-47"><a href="#cb9-47"></a><span class="co">#&gt; 24           residential    55</span></span>
<span id="cb9-48"><a href="#cb9-48"></a><span class="co">#&gt; 25               service   960</span></span>
<span id="cb9-49"><a href="#cb9-49"></a><span class="co">#&gt; 26                  shop   428</span></span>
<span id="cb9-50"><a href="#cb9-50"></a><span class="co">#&gt; 27       social_facility   184</span></span>
<span id="cb9-51"><a href="#cb9-51"></a><span class="co">#&gt; 28            substation    80</span></span>
<span id="cb9-52"><a href="#cb9-52"></a><span class="co">#&gt; 29       traffic_calming    47</span></span>
<span id="cb9-53"><a href="#cb9-53"></a><span class="co">#&gt; 30                 usage    38</span></span>
<span id="cb9-54"><a href="#cb9-54"></a><span class="co">#&gt; 31               vending     1</span></span>
<span id="cb9-55"><a href="#cb9-55"></a><span class="co">#&gt; 32               voltage    51</span></span>
<span id="cb9-56"><a href="#cb9-56"></a><span class="co">#&gt; 33                 water   405</span></span>
<span id="cb9-57"><a href="#cb9-57"></a><span class="co">#&gt; 34             wholesale     1</span></span>
<span id="cb9-58"><a href="#cb9-58"></a></span>
<span id="cb9-59"><a href="#cb9-59"></a><span class="kw">dataExport</span>(<span class="dt">data =</span> dlCut, <span class="dt">name =</span> locationName)</span>
<span id="cb9-60"><a href="#cb9-60"></a><span class="co">#&gt; File saved as: outputs/exampleEdinburgh_3_dataCut_20200811-155047.RDS</span></span></code></pre></div>
</div>
<div id="data-wrangling" class="section level3">
<h3>3.4. Data wrangling</h3>
<p>Using the function <code>dataWrangle</code> we can tidy up (or wrangle) the data before filtering. Timestamps and progress are printed when the function is running. There is one input argument:</p>
<ul>
<li><strong>dataCut</strong> Output from 3.3 (step 3)</li>
</ul>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1"></a>dlWrangle &lt;-<span class="st"> </span><span class="kw">dataWrangle</span>(<span class="dt">dataCut =</span> dlCut)</span>
<span id="cb10-2"><a href="#cb10-2"></a><span class="co">#&gt; 15:50:49 Step one of three</span></span>
<span id="cb10-3"><a href="#cb10-3"></a><span class="co">#&gt; 15:50:49 Step two of three</span></span>
<span id="cb10-4"><a href="#cb10-4"></a><span class="co">#&gt; 15:50:50 Step three of three</span></span>
<span id="cb10-5"><a href="#cb10-5"></a><span class="co">#&gt; Warning: `select_()` is deprecated as of dplyr 0.7.0.</span></span>
<span id="cb10-6"><a href="#cb10-6"></a><span class="co">#&gt; Please use `select()` instead.</span></span>
<span id="cb10-7"><a href="#cb10-7"></a><span class="co">#&gt; This warning is displayed once every 8 hours.</span></span>
<span id="cb10-8"><a href="#cb10-8"></a><span class="co">#&gt; Call `lifecycle::last_warnings()` to see where this warning was generated.</span></span>
<span id="cb10-9"><a href="#cb10-9"></a><span class="co">#&gt; 15:50:52 Complete, preparing output</span></span>
<span id="cb10-10"><a href="#cb10-10"></a></span>
<span id="cb10-11"><a href="#cb10-11"></a>dlWrangle <span class="op">%&gt;%</span><span class="st"> </span>dataSummary</span>
<span id="cb10-12"><a href="#cb10-12"></a><span class="co">#&gt; `summarise()` regrouping output by &#39;data&#39; (override with `.groups` argument)</span></span>
<span id="cb10-13"><a href="#cb10-13"></a><span class="co">#&gt; `summarise()` regrouping output by &#39;data&#39; (override with `.groups` argument)</span></span>
<span id="cb10-14"><a href="#cb10-14"></a><span class="co">#&gt; $class</span></span>
<span id="cb10-15"><a href="#cb10-15"></a><span class="co">#&gt; [1] &quot;list&quot;                &quot;OSMtidy_dataWrangle&quot;</span></span>
<span id="cb10-16"><a href="#cb10-16"></a><span class="co">#&gt; </span></span>
<span id="cb10-17"><a href="#cb10-17"></a><span class="co">#&gt; $byGeometry</span></span>
<span id="cb10-18"><a href="#cb10-18"></a><span class="co">#&gt;           data            type total percent</span></span>
<span id="cb10-19"><a href="#cb10-19"></a><span class="co">#&gt; 1 dataWrangled      linestring  4132    4.87</span></span>
<span id="cb10-20"><a href="#cb10-20"></a><span class="co">#&gt; 2 dataWrangled multilinestring    12    0.01</span></span>
<span id="cb10-21"><a href="#cb10-21"></a><span class="co">#&gt; 3 dataWrangled    multipolygon    28    0.03</span></span>
<span id="cb10-22"><a href="#cb10-22"></a><span class="co">#&gt; 4 dataWrangled           point  5881    6.93</span></span>
<span id="cb10-23"><a href="#cb10-23"></a><span class="co">#&gt; 5 dataWrangled         polygon  7017    8.26</span></span>
<span id="cb10-24"><a href="#cb10-24"></a><span class="co">#&gt; 6     noDetail      linestring    13    0.02</span></span>
<span id="cb10-25"><a href="#cb10-25"></a><span class="co">#&gt; 7     noDetail           point 67505   79.50</span></span>
<span id="cb10-26"><a href="#cb10-26"></a><span class="co">#&gt; 8     noDetail         polygon   328    0.39</span></span>
<span id="cb10-27"><a href="#cb10-27"></a><span class="co">#&gt; </span></span>
<span id="cb10-28"><a href="#cb10-28"></a><span class="co">#&gt; $byFeature</span></span>
<span id="cb10-29"><a href="#cb10-29"></a><span class="co">#&gt;            data          feature total percent</span></span>
<span id="cb10-30"><a href="#cb10-30"></a><span class="co">#&gt; 1  dataWrangled          amenity   640    0.75</span></span>
<span id="cb10-31"><a href="#cb10-31"></a><span class="co">#&gt; 2  dataWrangled          barrier  2873    3.38</span></span>
<span id="cb10-32"><a href="#cb10-32"></a><span class="co">#&gt; 3  dataWrangled         building  4240    4.99</span></span>
<span id="cb10-33"><a href="#cb10-33"></a><span class="co">#&gt; 4  dataWrangled            craft    21    0.02</span></span>
<span id="cb10-34"><a href="#cb10-34"></a><span class="co">#&gt; 5  dataWrangled         cycleway     1    0.00</span></span>
<span id="cb10-35"><a href="#cb10-35"></a><span class="co">#&gt; 6  dataWrangled        emergency    65    0.08</span></span>
<span id="cb10-36"><a href="#cb10-36"></a><span class="co">#&gt; 7  dataWrangled generator:source    15    0.02</span></span>
<span id="cb10-37"><a href="#cb10-37"></a><span class="co">#&gt; 8  dataWrangled       healthcare     2    0.00</span></span>
<span id="cb10-38"><a href="#cb10-38"></a><span class="co">#&gt; 9  dataWrangled          highway  1161    1.37</span></span>
<span id="cb10-39"><a href="#cb10-39"></a><span class="co">#&gt; 10 dataWrangled         historic     6    0.01</span></span>
<span id="cb10-40"><a href="#cb10-40"></a><span class="co">#&gt; 11 dataWrangled          landuse   383    0.45</span></span>
<span id="cb10-41"><a href="#cb10-41"></a><span class="co">#&gt; 12 dataWrangled          leisure  2348    2.77</span></span>
<span id="cb10-42"><a href="#cb10-42"></a><span class="co">#&gt; 13 dataWrangled         military     1    0.00</span></span>
<span id="cb10-43"><a href="#cb10-43"></a><span class="co">#&gt; 14 dataWrangled          natural  4163    4.90</span></span>
<span id="cb10-44"><a href="#cb10-44"></a><span class="co">#&gt; 15 dataWrangled           office    81    0.10</span></span>
<span id="cb10-45"><a href="#cb10-45"></a><span class="co">#&gt; 16 dataWrangled            power    11    0.01</span></span>
<span id="cb10-46"><a href="#cb10-46"></a><span class="co">#&gt; 17 dataWrangled          railway    12    0.01</span></span>
<span id="cb10-47"><a href="#cb10-47"></a><span class="co">#&gt; 18 dataWrangled          service     2    0.00</span></span>
<span id="cb10-48"><a href="#cb10-48"></a><span class="co">#&gt; 19 dataWrangled             shop   365    0.43</span></span>
<span id="cb10-49"><a href="#cb10-49"></a><span class="co">#&gt; 20 dataWrangled  social_facility     1    0.00</span></span>
<span id="cb10-50"><a href="#cb10-50"></a><span class="co">#&gt; 21 dataWrangled            usage     7    0.01</span></span>
<span id="cb10-51"><a href="#cb10-51"></a><span class="co">#&gt; 22 dataWrangled            water     1    0.00</span></span>
<span id="cb10-52"><a href="#cb10-52"></a><span class="co">#&gt; 23 dataWrangled             &lt;NA&gt;   671    0.79</span></span>
<span id="cb10-53"><a href="#cb10-53"></a><span class="co">#&gt; 24     noDetail          amenity  3053    3.60</span></span>
<span id="cb10-54"><a href="#cb10-54"></a><span class="co">#&gt; 25     noDetail          barrier  9030   10.63</span></span>
<span id="cb10-55"><a href="#cb10-55"></a><span class="co">#&gt; 26     noDetail           bridge    40    0.05</span></span>
<span id="cb10-56"><a href="#cb10-56"></a><span class="co">#&gt; 27     noDetail         building 28484   33.54</span></span>
<span id="cb10-57"><a href="#cb10-57"></a><span class="co">#&gt; 28     noDetail         cycleway    71    0.08</span></span>
<span id="cb10-58"><a href="#cb10-58"></a><span class="co">#&gt; 29     noDetail generator:method    52    0.06</span></span>
<span id="cb10-59"><a href="#cb10-59"></a><span class="co">#&gt; 30     noDetail generator:source   188    0.22</span></span>
<span id="cb10-60"><a href="#cb10-60"></a><span class="co">#&gt; 31     noDetail          highway  5251    6.18</span></span>
<span id="cb10-61"><a href="#cb10-61"></a><span class="co">#&gt; 32     noDetail         historic    31    0.04</span></span>
<span id="cb10-62"><a href="#cb10-62"></a><span class="co">#&gt; 33     noDetail          landuse  6182    7.28</span></span>
<span id="cb10-63"><a href="#cb10-63"></a><span class="co">#&gt; 34     noDetail          leisure 12464   14.68</span></span>
<span id="cb10-64"><a href="#cb10-64"></a><span class="co">#&gt; 35     noDetail          natural  1121    1.32</span></span>
<span id="cb10-65"><a href="#cb10-65"></a><span class="co">#&gt; 36     noDetail           office    24    0.03</span></span>
<span id="cb10-66"><a href="#cb10-66"></a><span class="co">#&gt; 37     noDetail            power   176    0.21</span></span>
<span id="cb10-67"><a href="#cb10-67"></a><span class="co">#&gt; 38     noDetail          railway   168    0.20</span></span>
<span id="cb10-68"><a href="#cb10-68"></a><span class="co">#&gt; 39     noDetail      residential    51    0.06</span></span>
<span id="cb10-69"><a href="#cb10-69"></a><span class="co">#&gt; 40     noDetail          service   686    0.81</span></span>
<span id="cb10-70"><a href="#cb10-70"></a><span class="co">#&gt; 41     noDetail             shop    48    0.06</span></span>
<span id="cb10-71"><a href="#cb10-71"></a><span class="co">#&gt; 42     noDetail  social_facility   172    0.20</span></span>
<span id="cb10-72"><a href="#cb10-72"></a><span class="co">#&gt; 43     noDetail       substation    59    0.07</span></span>
<span id="cb10-73"><a href="#cb10-73"></a><span class="co">#&gt; 44     noDetail  traffic_calming    23    0.03</span></span>
<span id="cb10-74"><a href="#cb10-74"></a><span class="co">#&gt; 45     noDetail            usage    31    0.04</span></span>
<span id="cb10-75"><a href="#cb10-75"></a><span class="co">#&gt; 46     noDetail          voltage    48    0.06</span></span>
<span id="cb10-76"><a href="#cb10-76"></a><span class="co">#&gt; 47     noDetail            water   393    0.46</span></span>
<span id="cb10-77"><a href="#cb10-77"></a></span>
<span id="cb10-78"><a href="#cb10-78"></a><span class="kw">dataExport</span>(<span class="dt">data =</span> dlWrangle, <span class="dt">name =</span> locationName)</span>
<span id="cb10-79"><a href="#cb10-79"></a><span class="co">#&gt; Files saved as:</span></span>
<span id="cb10-80"><a href="#cb10-80"></a><span class="co">#&gt; </span></span>
<span id="cb10-81"><a href="#cb10-81"></a><span class="co">#&gt;  outputs/exampleEdinburgh_4_dataWrangle_20200811-155053.RDS</span></span>
<span id="cb10-82"><a href="#cb10-82"></a><span class="co">#&gt;  outputs/exampleEdinburgh_4_dataWrangle-noDetail_20200811-155053.xlsx</span></span></code></pre></div>
</div>
<div id="data-filtering" class="section level3">
<h3>3.5. Data filtering</h3>
<p>The main function of OSMtidy is <code>dataFilter()</code>. Here, the data is filtered based on rules set out in the excel file <em>filters.xlsx</em>; this can be found in the main OSMtidy directory. You may adjust these rules by editting the spreadsheet. See Vignette 3 for further details. Timestamps and progress are printed when the function is running. There are three input arguments to <code>dataFilter()</code>:</p>
<ul>
<li><strong>dataWrangle</strong> Output from 3.4 (step 4)</li>
<li><strong>filters</strong> Name of the the filters spreadsheet
<ul>
<li>Default to filters.xlsx</li>
<li>Use the function <code>filterOverview()</code> for an overview of the filtered objects</li>
</ul></li>
<li><strong>rows</strong> Specify the rows in the spreadsheet to use as filters. Intended for troubleshooting and adjusting filters
<ul>
<li>Default to NULL, i.e. all filters or rows</li>
</ul></li>
</ul>
<p>Depending on the location size, number of filters and computer performance, filters can take anything from a couple of minutes (the example ward) to multiple hours to run (City of London and Boroughs). The code chunk below is not run.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a>dlFilter &lt;-<span class="st"> </span><span class="kw">dataFilter</span>(<span class="dt">dataWrangle =</span> dlWrangle, <span class="dt">filters =</span> <span class="st">&quot;filters.xlsx&quot;</span>)</span></code></pre></div>
<p><br></p>
<p>The output may be interrogated and exported as before.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1"></a>dlFilter <span class="op">%&gt;%</span><span class="st"> </span>dataSummary</span>
<span id="cb12-2"><a href="#cb12-2"></a><span class="co">#&gt; `summarise()` ungrouping output (override with `.groups` argument)</span></span>
<span id="cb12-3"><a href="#cb12-3"></a><span class="co">#&gt; `summarise()` ungrouping output (override with `.groups` argument)</span></span>
<span id="cb12-4"><a href="#cb12-4"></a><span class="co">#&gt; `summarise()` ungrouping output (override with `.groups` argument)</span></span>
<span id="cb12-5"><a href="#cb12-5"></a><span class="co">#&gt; $class</span></span>
<span id="cb12-6"><a href="#cb12-6"></a><span class="co">#&gt; [1] &quot;list&quot;               &quot;OSMtidy_dataFilter&quot;</span></span>
<span id="cb12-7"><a href="#cb12-7"></a><span class="co">#&gt; </span></span>
<span id="cb12-8"><a href="#cb12-8"></a><span class="co">#&gt; $summary</span></span>
<span id="cb12-9"><a href="#cb12-9"></a><span class="co">#&gt;         data total percent</span></span>
<span id="cb12-10"><a href="#cb12-10"></a><span class="co">#&gt; 1   filtered 12194   71.44</span></span>
<span id="cb12-11"><a href="#cb12-11"></a><span class="co">#&gt; 2 unfiltered   562    3.29</span></span>
<span id="cb12-12"><a href="#cb12-12"></a><span class="co">#&gt; 3   validate  4314   25.27</span></span>
<span id="cb12-13"><a href="#cb12-13"></a><span class="co">#&gt; </span></span>
<span id="cb12-14"><a href="#cb12-14"></a><span class="co">#&gt; $summaryFiltered</span></span>
<span id="cb12-15"><a href="#cb12-15"></a><span class="co">#&gt; # A tibble: 176 x 2</span></span>
<span id="cb12-16"><a href="#cb12-16"></a><span class="co">#&gt;    desc                           total</span></span>
<span id="cb12-17"><a href="#cb12-17"></a><span class="co">#&gt;    &lt;chr&gt;                          &lt;int&gt;</span></span>
<span id="cb12-18"><a href="#cb12-18"></a><span class="co">#&gt;  1 Amenity; ATM                      14</span></span>
<span id="cb12-19"><a href="#cb12-19"></a><span class="co">#&gt;  2 Amenity; Bicycle parking          49</span></span>
<span id="cb12-20"><a href="#cb12-20"></a><span class="co">#&gt;  3 Amenity; Bike rental point         6</span></span>
<span id="cb12-21"><a href="#cb12-21"></a><span class="co">#&gt;  4 Amenity; Car wash                  2</span></span>
<span id="cb12-22"><a href="#cb12-22"></a><span class="co">#&gt;  5 Amenity; Fire hydrant             64</span></span>
<span id="cb12-23"><a href="#cb12-23"></a><span class="co">#&gt;  6 Amenity; Flood defence             2</span></span>
<span id="cb12-24"><a href="#cb12-24"></a><span class="co">#&gt;  7 Amenity; Fountain (decorative)     1</span></span>
<span id="cb12-25"><a href="#cb12-25"></a><span class="co">#&gt;  8 Amenity; Fuel station              1</span></span>
<span id="cb12-26"><a href="#cb12-26"></a><span class="co">#&gt;  9 Amenity; Garages and sheds       325</span></span>
<span id="cb12-27"><a href="#cb12-27"></a><span class="co">#&gt; 10 Amenity; Information board         1</span></span>
<span id="cb12-28"><a href="#cb12-28"></a><span class="co">#&gt; # ... with 166 more rows</span></span>
<span id="cb12-29"><a href="#cb12-29"></a><span class="co">#&gt; </span></span>
<span id="cb12-30"><a href="#cb12-30"></a><span class="co">#&gt; $byFeature</span></span>
<span id="cb12-31"><a href="#cb12-31"></a><span class="co">#&gt;          data         feature total</span></span>
<span id="cb12-32"><a href="#cb12-32"></a><span class="co">#&gt; 1  unfiltered        building   531</span></span>
<span id="cb12-33"><a href="#cb12-33"></a><span class="co">#&gt; 2  unfiltered         landuse    12</span></span>
<span id="cb12-34"><a href="#cb12-34"></a><span class="co">#&gt; 3  unfiltered            &lt;NA&gt;    19</span></span>
<span id="cb12-35"><a href="#cb12-35"></a><span class="co">#&gt; 4    validate         amenity     4</span></span>
<span id="cb12-36"><a href="#cb12-36"></a><span class="co">#&gt; 5    validate        building    28</span></span>
<span id="cb12-37"><a href="#cb12-37"></a><span class="co">#&gt; 6    validate           craft     3</span></span>
<span id="cb12-38"><a href="#cb12-38"></a><span class="co">#&gt; 7    validate         highway     6</span></span>
<span id="cb12-39"><a href="#cb12-39"></a><span class="co">#&gt; 8    validate        historic     1</span></span>
<span id="cb12-40"><a href="#cb12-40"></a><span class="co">#&gt; 9    validate         leisure     6</span></span>
<span id="cb12-41"><a href="#cb12-41"></a><span class="co">#&gt; 10   validate        military     1</span></span>
<span id="cb12-42"><a href="#cb12-42"></a><span class="co">#&gt; 11   validate          office     7</span></span>
<span id="cb12-43"><a href="#cb12-43"></a><span class="co">#&gt; 12   validate         railway    12</span></span>
<span id="cb12-44"><a href="#cb12-44"></a><span class="co">#&gt; 13   validate            shop     3</span></span>
<span id="cb12-45"><a href="#cb12-45"></a><span class="co">#&gt; 14   validate social_facility     1</span></span>
<span id="cb12-46"><a href="#cb12-46"></a><span class="co">#&gt; 15   validate            &lt;NA&gt;  4242</span></span>
<span id="cb12-47"><a href="#cb12-47"></a></span>
<span id="cb12-48"><a href="#cb12-48"></a><span class="kw">dataExport</span>(<span class="dt">data =</span> dlFilter, <span class="dt">name =</span> locationName)</span>
<span id="cb12-49"><a href="#cb12-49"></a><span class="co">#&gt; Loading required package: xlsx</span></span>
<span id="cb12-50"><a href="#cb12-50"></a><span class="co">#&gt; </span></span>
<span id="cb12-51"><a href="#cb12-51"></a><span class="co">#&gt; Attaching package: &#39;xlsx&#39;</span></span>
<span id="cb12-52"><a href="#cb12-52"></a><span class="co">#&gt; The following objects are masked from &#39;package:openxlsx&#39;:</span></span>
<span id="cb12-53"><a href="#cb12-53"></a><span class="co">#&gt; </span></span>
<span id="cb12-54"><a href="#cb12-54"></a><span class="co">#&gt;     createWorkbook, loadWorkbook, read.xlsx, saveWorkbook, write.xlsx</span></span>
<span id="cb12-55"><a href="#cb12-55"></a><span class="co">#&gt; Files saved as:</span></span>
<span id="cb12-56"><a href="#cb12-56"></a><span class="co">#&gt; </span></span>
<span id="cb12-57"><a href="#cb12-57"></a><span class="co">#&gt;  outputs/exampleEdinburgh_5_dataFilter-unfiltered_20200811-155107.xlsx</span></span>
<span id="cb12-58"><a href="#cb12-58"></a><span class="co">#&gt;  outputs/exampleEdinburgh_5_dataFilter-filtered_20200811-155107.csv</span></span>
<span id="cb12-59"><a href="#cb12-59"></a><span class="co">#&gt;  outputs/exampleEdinburgh_5_dataFilter-filtered_20200811-155107.RDS</span></span>
<span id="cb12-60"><a href="#cb12-60"></a><span class="co">#&gt;  outputs/exampleEdinburgh_5_dataFilter-validate_20200811-155108.xlsx</span></span></code></pre></div>
</div>
<div id="data-tidy" class="section level3">
<h3>3.6. Data tidy</h3>
<p>The final step. The function <code>dataTidy()</code> generates a single tidied output based on any combination of the filtered, validated, unfiltered and no detail data.</p>
<p>Note that multiple outputs from <code>dataWrangle()</code> and <code>dataFilter()</code> were spreadsheets (.xlsx extension). You may manually adjust the <em>desc</em> column in these and reimport them in this step.</p>
<p>The input argument is a list of the objects to be imported. They can either be imported locally, as objects from the R environment, or from the manually adjusted spreadsheets. The code chunk below focusses on the outputs of <code>dataFilter()</code> only. Vignettes 3 and 4 introduce a number of alternative inputs.</p>
<p>The tidied geotagged dataset is saved in .RDS, and .csv for use in a range of applications. To export as a shapefile it is necessary to split the geotagged dataset by geometry type first.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1"></a>dlTidy &lt;-<span class="st"> </span><span class="kw">dataTidy</span>(dlFilter)</span>
<span id="cb13-2"><a href="#cb13-2"></a><span class="co">#&gt; Warning in is.na(desc): is.na() applied to non-(list or vector) of type</span></span>
<span id="cb13-3"><a href="#cb13-3"></a><span class="co">#&gt; &#39;closure&#39;</span></span>
<span id="cb13-4"><a href="#cb13-4"></a></span>
<span id="cb13-5"><a href="#cb13-5"></a><span class="co">#&gt; Warning in is.na(desc): is.na() applied to non-(list or vector) of type</span></span>
<span id="cb13-6"><a href="#cb13-6"></a><span class="co">#&gt; &#39;closure&#39;</span></span>
<span id="cb13-7"><a href="#cb13-7"></a></span>
<span id="cb13-8"><a href="#cb13-8"></a><span class="co">#&gt; Warning in is.na(desc): is.na() applied to non-(list or vector) of type</span></span>
<span id="cb13-9"><a href="#cb13-9"></a><span class="co">#&gt; &#39;closure&#39;</span></span>
<span id="cb13-10"><a href="#cb13-10"></a></span>
<span id="cb13-11"><a href="#cb13-11"></a>dlTidy <span class="op">%&gt;%</span><span class="st"> </span>dataSummary</span>
<span id="cb13-12"><a href="#cb13-12"></a><span class="co">#&gt; `summarise()` ungrouping output (override with `.groups` argument)</span></span>
<span id="cb13-13"><a href="#cb13-13"></a><span class="co">#&gt; `summarise()` ungrouping output (override with `.groups` argument)</span></span>
<span id="cb13-14"><a href="#cb13-14"></a><span class="co">#&gt; $class</span></span>
<span id="cb13-15"><a href="#cb13-15"></a><span class="co">#&gt; [1] &quot;list&quot;             &quot;OSMtidy_dataTidy&quot;</span></span>
<span id="cb13-16"><a href="#cb13-16"></a><span class="co">#&gt; </span></span>
<span id="cb13-17"><a href="#cb13-17"></a><span class="co">#&gt; $summary</span></span>
<span id="cb13-18"><a href="#cb13-18"></a><span class="co">#&gt; # A tibble: 4 x 3</span></span>
<span id="cb13-19"><a href="#cb13-19"></a><span class="co">#&gt;   data                 total percent</span></span>
<span id="cb13-20"><a href="#cb13-20"></a><span class="co">#&gt;   &lt;chr&gt;                &lt;int&gt;   &lt;dbl&gt;</span></span>
<span id="cb13-21"><a href="#cb13-21"></a><span class="co">#&gt; 1 unfiltered             569    3.33</span></span>
<span id="cb13-22"><a href="#cb13-22"></a><span class="co">#&gt; 2 removeKeywordFilters    37    0.22</span></span>
<span id="cb13-23"><a href="#cb13-23"></a><span class="co">#&gt; 3 remove                 300    1.76</span></span>
<span id="cb13-24"><a href="#cb13-24"></a><span class="co">#&gt; 4 filtered             16164   94.7 </span></span>
<span id="cb13-25"><a href="#cb13-25"></a><span class="co">#&gt; </span></span>
<span id="cb13-26"><a href="#cb13-26"></a><span class="co">#&gt; $summaryFiltered</span></span>
<span id="cb13-27"><a href="#cb13-27"></a><span class="co">#&gt; # A tibble: 190 x 2</span></span>
<span id="cb13-28"><a href="#cb13-28"></a><span class="co">#&gt;    desc                           total</span></span>
<span id="cb13-29"><a href="#cb13-29"></a><span class="co">#&gt;    &lt;chr&gt;                          &lt;int&gt;</span></span>
<span id="cb13-30"><a href="#cb13-30"></a><span class="co">#&gt;  1 Amenity; ATM                      14</span></span>
<span id="cb13-31"><a href="#cb13-31"></a><span class="co">#&gt;  2 Amenity; Bicycle parking          49</span></span>
<span id="cb13-32"><a href="#cb13-32"></a><span class="co">#&gt;  3 Amenity; Bike rental point         6</span></span>
<span id="cb13-33"><a href="#cb13-33"></a><span class="co">#&gt;  4 Amenity; Car wash                  2</span></span>
<span id="cb13-34"><a href="#cb13-34"></a><span class="co">#&gt;  5 Amenity; Fire hydrant             64</span></span>
<span id="cb13-35"><a href="#cb13-35"></a><span class="co">#&gt;  6 Amenity; Flood defence             2</span></span>
<span id="cb13-36"><a href="#cb13-36"></a><span class="co">#&gt;  7 Amenity; Fountain (decorative)     1</span></span>
<span id="cb13-37"><a href="#cb13-37"></a><span class="co">#&gt;  8 Amenity; Fuel station              1</span></span>
<span id="cb13-38"><a href="#cb13-38"></a><span class="co">#&gt;  9 Amenity; Garages and sheds       325</span></span>
<span id="cb13-39"><a href="#cb13-39"></a><span class="co">#&gt; 10 Amenity; Information board         1</span></span>
<span id="cb13-40"><a href="#cb13-40"></a><span class="co">#&gt; # ... with 180 more rows</span></span>
<span id="cb13-41"><a href="#cb13-41"></a><span class="co">#&gt; </span></span>
<span id="cb13-42"><a href="#cb13-42"></a><span class="co">#&gt; $unfiltered</span></span>
<span id="cb13-43"><a href="#cb13-43"></a><span class="co">#&gt; # A tibble: 5 x 2</span></span>
<span id="cb13-44"><a href="#cb13-44"></a><span class="co">#&gt;   feature  total</span></span>
<span id="cb13-45"><a href="#cb13-45"></a><span class="co">#&gt;   &lt;chr&gt;    &lt;int&gt;</span></span>
<span id="cb13-46"><a href="#cb13-46"></a><span class="co">#&gt; 1 amenity      1</span></span>
<span id="cb13-47"><a href="#cb13-47"></a><span class="co">#&gt; 2 building   531</span></span>
<span id="cb13-48"><a href="#cb13-48"></a><span class="co">#&gt; 3 highway      6</span></span>
<span id="cb13-49"><a href="#cb13-49"></a><span class="co">#&gt; 4 landuse     12</span></span>
<span id="cb13-50"><a href="#cb13-50"></a><span class="co">#&gt; 5 &lt;NA&gt;        19</span></span>
<span id="cb13-51"><a href="#cb13-51"></a></span>
<span id="cb13-52"><a href="#cb13-52"></a>dlTidy<span class="op">$</span>filtered</span>
<span id="cb13-53"><a href="#cb13-53"></a><span class="co">#&gt; # A tibble: 16,164 x 3</span></span>
<span id="cb13-54"><a href="#cb13-54"></a><span class="co">#&gt;    osm_id   desc                                                        geometry</span></span>
<span id="cb13-55"><a href="#cb13-55"></a><span class="co">#&gt;    &lt;chr&gt;    &lt;chr&gt;                                                 &lt;GEOMETRY [°]&gt;</span></span>
<span id="cb13-56"><a href="#cb13-56"></a><span class="co">#&gt;  1 3195818~ Amenity; Floo~ MULTILINESTRING ((-3.199711 55.9629, -3.199508 55.96~</span></span>
<span id="cb13-57"><a href="#cb13-57"></a><span class="co">#&gt;  2 3343407~ Barrier; Wall  LINESTRING (-3.167914 55.96796, -3.16797 55.96798, -~</span></span>
<span id="cb13-58"><a href="#cb13-58"></a><span class="co">#&gt;  3 3418179~ Barrier; Wall  LINESTRING (-3.199838 55.96309, -3.199801 55.96312, ~</span></span>
<span id="cb13-59"><a href="#cb13-59"></a><span class="co">#&gt;  4 3418179~ Barrier; Wall     LINESTRING (-3.199572 55.9636, -3.199394 55.96358)</span></span>
<span id="cb13-60"><a href="#cb13-60"></a><span class="co">#&gt;  5 3418179~ Barrier; Wall      LINESTRING (-3.199402 55.96393, -3.19923 55.9639)</span></span>
<span id="cb13-61"><a href="#cb13-61"></a><span class="co">#&gt;  6 3418179~ Barrier; Wall    LINESTRING (-3.199641 55.96347, -3.199465 55.96344)</span></span>
<span id="cb13-62"><a href="#cb13-62"></a><span class="co">#&gt;  7 3418179~ Barrier; Wall    LINESTRING (-3.199203 55.96431, -3.199179 55.96431)</span></span>
<span id="cb13-63"><a href="#cb13-63"></a><span class="co">#&gt;  8 3418180~ Barrier; Wall    LINESTRING (-3.199269 55.96418, -3.199168 55.96417)</span></span>
<span id="cb13-64"><a href="#cb13-64"></a><span class="co">#&gt;  9 3418180~ Barrier; Wall    LINESTRING (-3.199607 55.96354, -3.199422 55.96351)</span></span>
<span id="cb13-65"><a href="#cb13-65"></a><span class="co">#&gt; 10 3418180~ Barrier; Wall    LINESTRING (-3.199435 55.96386, -3.199261 55.96384)</span></span>
<span id="cb13-66"><a href="#cb13-66"></a><span class="co">#&gt; # ... with 16,154 more rows</span></span>
<span id="cb13-67"><a href="#cb13-67"></a></span>
<span id="cb13-68"><a href="#cb13-68"></a><span class="kw">dataExport</span>(<span class="dt">data =</span> dlTidy, <span class="dt">name =</span> locationName)</span>
<span id="cb13-69"><a href="#cb13-69"></a><span class="co">#&gt; Files saved as:</span></span>
<span id="cb13-70"><a href="#cb13-70"></a><span class="co">#&gt; </span></span>
<span id="cb13-71"><a href="#cb13-71"></a><span class="co">#&gt;  outputs/exampleEdinburgh_6_dataTidy-unfiltered_20200811-155112.RDS</span></span>
<span id="cb13-72"><a href="#cb13-72"></a><span class="co">#&gt;  outputs/exampleEdinburgh_6_dataTidy-removeKeywordFilters_20200811-155112.RDS</span></span>
<span id="cb13-73"><a href="#cb13-73"></a><span class="co">#&gt;  outputs/exampleEdinburgh_6_dataTidy-remove_20200811-155112.RDS</span></span>
<span id="cb13-74"><a href="#cb13-74"></a><span class="co">#&gt;  outputs/exampleEdinburgh_6_dataTidy-filtered_20200811-155112.RDS</span></span>
<span id="cb13-75"><a href="#cb13-75"></a><span class="co">#&gt;  outputs/exampleEdinburgh_6_dataTidy-filtered_20200811-155112.csv</span></span></code></pre></div>
</div>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
