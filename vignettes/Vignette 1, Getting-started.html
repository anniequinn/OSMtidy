<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />

<meta name="author" content="Dr Annie Visser-Quinn, a.visser-quinn@hw.ac.uk" />

<meta name="date" content="2020-08-11" />

<title>OSMtidy - Vignette 1, Getting started</title>

<script>// Hide empty <a> tag within highlighted CodeBlock for screen reader accessibility (see https://github.com/jgm/pandoc/issues/6352#issuecomment-626106786) -->
// v0.0.1
// Written by JooYoung Seo (jooyoung@psu.edu) and Atsushi Yasumoto on June 1st, 2020.

document.addEventListener('DOMContentLoaded', function() {
  const codeList = document.getElementsByClassName("sourceCode");
  for (var i = 0; i < codeList.length; i++) {
    var linkList = codeList[i].getElementsByTagName('a');
    for (var j = 0; j < linkList.length; j++) {
      if (linkList[j].innerHTML === "") {
        linkList[j].setAttribute('aria-hidden', 'true');
      }
    }
  }
});
</script>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>



<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">OSMtidy - Vignette 1, Getting started</h1>
<h4 class="author">Dr Annie Visser-Quinn, <a href="mailto:a.visser-quinn@hw.ac.uk" class="email">a.visser-quinn@hw.ac.uk</a></h4>
<h4 class="date">2020-08-11</h4>


<div id="TOC">
<ul>
<li><a href="#prerequisites">1. Prerequisites</a></li>
<li><a href="#data">2. Data</a></li>
<li><a href="#tidy-data">3. Tidy data</a></li>
<li><a href="#export-shapefile">4. Export shapefile</a></li>
</ul>
</div>

<div id="prerequisites" class="section level2">
<h2>1. Prerequisites</h2>
<ul>
<li>OSMtidy V0.0.41</li>
<li>R version 3.6.3 or newer</li>
<li>R packages <code>tidyverse</code> and <code>sf</code></li>
</ul>
</div>
<div id="data" class="section level2">
<h2>2. Data</h2>
<p>The input to OSMtidy is a shapefile, or polygon, outline of a given location. This version of OSMtidy is bundled with a shapefile from the UK’s Ordinance Survey Open Data (<a href="https://www.ordnancesurvey.co.uk/business-government/products/boundaryline" class="uri">https://www.ordnancesurvey.co.uk/business-government/products/boundaryline</a>). The data is provided under the UK Government’s OGL licence; see <em>LICENCE_OGL3.mhtml</em> in the <em>shapefiles</em> folder for details.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="kw">list.files</span>(<span class="st">&quot;shapefiles&quot;</span>, <span class="dt">pattern =</span> <span class="st">&quot;unitary_ward&quot;</span>)</span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="co">#&gt; [1] &quot;district_borough_unitary_ward_region.dbf&quot;</span></span>
<span id="cb1-3"><a href="#cb1-3"></a><span class="co">#&gt; [2] &quot;district_borough_unitary_ward_region.prj&quot;</span></span>
<span id="cb1-4"><a href="#cb1-4"></a><span class="co">#&gt; [3] &quot;district_borough_unitary_ward_region.shp&quot;</span></span>
<span id="cb1-5"><a href="#cb1-5"></a><span class="co">#&gt; [4] &quot;district_borough_unitary_ward_region.shx&quot;</span></span></code></pre></div>
<p>This vignette provides an example of how to prepare your shapefiles for use in OSMtidy.</p>
<p><br></p>
</div>
<div id="tidy-data" class="section level2">
<h2>3. Tidy data</h2>
<p>The first step is to read the data in, we do this using the function <code>st_read()</code> from the R package <code>sf</code>.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a>shp &lt;-<span class="st"> </span><span class="kw">st_read</span>(<span class="st">&quot;shapefiles/district_borough_unitary_ward_region.shp&quot;</span>, <span class="dt">quiet =</span> <span class="ot">TRUE</span>)</span>
<span id="cb2-2"><a href="#cb2-2"></a>shp</span>
<span id="cb2-3"><a href="#cb2-3"></a><span class="co">#&gt; Simple feature collection with 7125 features and 15 fields</span></span>
<span id="cb2-4"><a href="#cb2-4"></a><span class="co">#&gt; geometry type:  MULTIPOLYGON</span></span>
<span id="cb2-5"><a href="#cb2-5"></a><span class="co">#&gt; dimension:      XY</span></span>
<span id="cb2-6"><a href="#cb2-6"></a><span class="co">#&gt; bbox:           xmin: 5512.998 ymin: 5333.603 xmax: 655989 ymax: 1220302</span></span>
<span id="cb2-7"><a href="#cb2-7"></a><span class="co">#&gt; projected CRS:  OSGB 1936 / British National Grid</span></span>
<span id="cb2-8"><a href="#cb2-8"></a><span class="co">#&gt; First 10 features:</span></span>
<span id="cb2-9"><a href="#cb2-9"></a><span class="co">#&gt;                                        NAME AREA_CODE    DESCRIPTIO</span></span>
<span id="cb2-10"><a href="#cb2-10"></a><span class="co">#&gt; 1                        Chiltern Rise Ward       DIW District Ward</span></span>
<span id="cb2-11"><a href="#cb2-11"></a><span class="co">#&gt; 2  Lacey Green, Speen and the Hampdens Ward       DIW District Ward</span></span>
<span id="cb2-12"><a href="#cb2-12"></a><span class="co">#&gt; 3                   Booker and Cressex Ward       DIW District Ward</span></span>
<span id="cb2-13"><a href="#cb2-13"></a><span class="co">#&gt; 4                                Abbey Ward       DIW District Ward</span></span>
<span id="cb2-14"><a href="#cb2-14"></a><span class="co">#&gt; 5                                Sands Ward       DIW District Ward</span></span>
<span id="cb2-15"><a href="#cb2-15"></a><span class="co">#&gt; 6                             Disraeli Ward       DIW District Ward</span></span>
<span id="cb2-16"><a href="#cb2-16"></a><span class="co">#&gt; 7           Terriers and Amersham Hill Ward       DIW District Ward</span></span>
<span id="cb2-17"><a href="#cb2-17"></a><span class="co">#&gt; 8                    Greater Hughenden Ward       DIW District Ward</span></span>
<span id="cb2-18"><a href="#cb2-18"></a><span class="co">#&gt; 9           Tylers Green and Loudwater Ward       DIW District Ward</span></span>
<span id="cb2-19"><a href="#cb2-19"></a><span class="co">#&gt; 10                     The Risboroughs Ward       DIW District Ward</span></span>
<span id="cb2-20"><a href="#cb2-20"></a><span class="co">#&gt;                 FILE_NAME NUMBER NUMBER0 POLYGON_ID UNIT_ID      CODE HECTARES</span></span>
<span id="cb2-21"><a href="#cb2-21"></a><span class="co">#&gt; 1  BUCKINGHAMSHIRE_COUNTY      1       1      51815   11853 E05002679 2245.296</span></span>
<span id="cb2-22"><a href="#cb2-22"></a><span class="co">#&gt; 2  BUCKINGHAMSHIRE_COUNTY      2       2      51826   11864 E05002689 2322.664</span></span>
<span id="cb2-23"><a href="#cb2-23"></a><span class="co">#&gt; 3  BUCKINGHAMSHIRE_COUNTY      3       3      51819   11858 E05002676  262.429</span></span>
<span id="cb2-24"><a href="#cb2-24"></a><span class="co">#&gt; 4  BUCKINGHAMSHIRE_COUNTY      4       4     125171   11788 E05002674  455.674</span></span>
<span id="cb2-25"><a href="#cb2-25"></a><span class="co">#&gt; 5  BUCKINGHAMSHIRE_COUNTY      5       5      51822   11861 E05002695  337.526</span></span>
<span id="cb2-26"><a href="#cb2-26"></a><span class="co">#&gt; 6  BUCKINGHAMSHIRE_COUNTY      6       6      51918   11784 E05002680  213.448</span></span>
<span id="cb2-27"><a href="#cb2-27"></a><span class="co">#&gt; 7  BUCKINGHAMSHIRE_COUNTY      7       7     125173   11810 E05002697  276.751</span></span>
<span id="cb2-28"><a href="#cb2-28"></a><span class="co">#&gt; 8  BUCKINGHAMSHIRE_COUNTY      8       8     126851   42959 E05002683 1879.171</span></span>
<span id="cb2-29"><a href="#cb2-29"></a><span class="co">#&gt; 9  BUCKINGHAMSHIRE_COUNTY      9       9     117730   11750 E05002701  719.226</span></span>
<span id="cb2-30"><a href="#cb2-30"></a><span class="co">#&gt; 10 BUCKINGHAMSHIRE_COUNTY     10      10     128834   11865 E05002699 1065.502</span></span>
<span id="cb2-31"><a href="#cb2-31"></a><span class="co">#&gt;    AREA TYPE_CODE         DESCRIPT0 TYPE_COD0 DESCRIPT1</span></span>
<span id="cb2-32"><a href="#cb2-32"></a><span class="co">#&gt; 1     0        VA CIVIL VOTING AREA      &lt;NA&gt;      &lt;NA&gt;</span></span>
<span id="cb2-33"><a href="#cb2-33"></a><span class="co">#&gt; 2     0        VA CIVIL VOTING AREA      &lt;NA&gt;      &lt;NA&gt;</span></span>
<span id="cb2-34"><a href="#cb2-34"></a><span class="co">#&gt; 3     0        VA CIVIL VOTING AREA      &lt;NA&gt;      &lt;NA&gt;</span></span>
<span id="cb2-35"><a href="#cb2-35"></a><span class="co">#&gt; 4     0        VA CIVIL VOTING AREA      &lt;NA&gt;      &lt;NA&gt;</span></span>
<span id="cb2-36"><a href="#cb2-36"></a><span class="co">#&gt; 5     0        VA CIVIL VOTING AREA      &lt;NA&gt;      &lt;NA&gt;</span></span>
<span id="cb2-37"><a href="#cb2-37"></a><span class="co">#&gt; 6     0        VA CIVIL VOTING AREA      &lt;NA&gt;      &lt;NA&gt;</span></span>
<span id="cb2-38"><a href="#cb2-38"></a><span class="co">#&gt; 7     0        VA CIVIL VOTING AREA      &lt;NA&gt;      &lt;NA&gt;</span></span>
<span id="cb2-39"><a href="#cb2-39"></a><span class="co">#&gt; 8     0        VA CIVIL VOTING AREA      &lt;NA&gt;      &lt;NA&gt;</span></span>
<span id="cb2-40"><a href="#cb2-40"></a><span class="co">#&gt; 9     0        VA CIVIL VOTING AREA      &lt;NA&gt;      &lt;NA&gt;</span></span>
<span id="cb2-41"><a href="#cb2-41"></a><span class="co">#&gt; 10    0        VA CIVIL VOTING AREA      &lt;NA&gt;      &lt;NA&gt;</span></span>
<span id="cb2-42"><a href="#cb2-42"></a><span class="co">#&gt;                          geometry</span></span>
<span id="cb2-43"><a href="#cb2-43"></a><span class="co">#&gt; 1  MULTIPOLYGON (((477425.3 19...</span></span>
<span id="cb2-44"><a href="#cb2-44"></a><span class="co">#&gt; 2  MULTIPOLYGON (((481498.6 19...</span></span>
<span id="cb2-45"><a href="#cb2-45"></a><span class="co">#&gt; 3  MULTIPOLYGON (((483096.8 19...</span></span>
<span id="cb2-46"><a href="#cb2-46"></a><span class="co">#&gt; 4  MULTIPOLYGON (((485369 1910...</span></span>
<span id="cb2-47"><a href="#cb2-47"></a><span class="co">#&gt; 5  MULTIPOLYGON (((481944.2 19...</span></span>
<span id="cb2-48"><a href="#cb2-48"></a><span class="co">#&gt; 6  MULTIPOLYGON (((486440 1933...</span></span>
<span id="cb2-49"><a href="#cb2-49"></a><span class="co">#&gt; 7  MULTIPOLYGON (((488140.6 19...</span></span>
<span id="cb2-50"><a href="#cb2-50"></a><span class="co">#&gt; 8  MULTIPOLYGON (((483481.9 19...</span></span>
<span id="cb2-51"><a href="#cb2-51"></a><span class="co">#&gt; 9  MULTIPOLYGON (((491787 1907...</span></span>
<span id="cb2-52"><a href="#cb2-52"></a><span class="co">#&gt; 10 MULTIPOLYGON (((482000.6 20...</span></span></code></pre></div>
<p><br></p>
<p>Next, we need to choose a location to focus on. The OS data is at the ward level - in these vignettes we will look at a ward in the <em>City of Edinburgh (Scotland)</em> called <em>Leith Walk</em>.</p>
<p>In the next code chunk, we reduce the data down to the location of interest using <code>tidyverse</code> notation.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a>shp &lt;-<span class="st"> </span></span>
<span id="cb3-2"><a href="#cb3-2"></a><span class="st">  </span>shp <span class="op">%&gt;%</span></span>
<span id="cb3-3"><a href="#cb3-3"></a><span class="st">  </span><span class="kw">filter</span>(<span class="kw">str_detect</span>(FILE_NAME, <span class="st">&quot;CITY_OF_EDINBURGH&quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb3-4"><a href="#cb3-4"></a><span class="st">  </span><span class="kw">filter</span>(<span class="kw">str_detect</span>(NAME, <span class="st">&quot;Leith Walk&quot;</span>)) <span class="op">%&gt;%</span></span>
<span id="cb3-5"><a href="#cb3-5"></a><span class="st">  </span><span class="kw">select</span>(geometry)</span>
<span id="cb3-6"><a href="#cb3-6"></a>shp</span>
<span id="cb3-7"><a href="#cb3-7"></a><span class="co">#&gt; Simple feature collection with 1 feature and 0 fields</span></span>
<span id="cb3-8"><a href="#cb3-8"></a><span class="co">#&gt; geometry type:  MULTIPOLYGON</span></span>
<span id="cb3-9"><a href="#cb3-9"></a><span class="co">#&gt; dimension:      XY</span></span>
<span id="cb3-10"><a href="#cb3-10"></a><span class="co">#&gt; bbox:           xmin: 325186.8 ymin: 674419.7 xmax: 327500.8 ymax: 676416</span></span>
<span id="cb3-11"><a href="#cb3-11"></a><span class="co">#&gt; projected CRS:  OSGB 1936 / British National Grid</span></span>
<span id="cb3-12"><a href="#cb3-12"></a><span class="co">#&gt;                         geometry</span></span>
<span id="cb3-13"><a href="#cb3-13"></a><span class="co">#&gt; 1 MULTIPOLYGON (((327500.8 67...</span></span></code></pre></div>
<p><br></p>
<p>Because the shapefile was imported to R as a spatial feature, using <code>sf</code>, we can plot it in ggplot using <code>geom_sf()</code>.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a>shp <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">ggplot</span>() <span class="op">+</span><span class="st"> </span><span class="kw">geom_sf</span>()</span></code></pre></div>
<p><img src="data:image/png;base64,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HWGN+er2vWd/u8wBrR4+kcV//cXnx5/LDDLUkRl0Xi9WjTFUUtHm/htrg6noUrHbD9D2mczGyjrzQqbogyuXP7nB0mkrfGW53UytvvX32dd4NrHg2RtXf5JFH1yZ/SiVxZ8+fu8GbzDLe0MdFW0USzOSqZKM1os1a4OpKG///oDS3CG1u7nIilZ/+f1v0s2CdeFskH7xtLS4FKuxOlmxj+vXT/60iIq04MX/fezugrd3Uxozq3WKaHVTYjBJTTvKo9VtNdcGk80Q7R8CUG66O8lLNvN3X0q3N/55J3e1Ztkq/5eNVXMefO7nb5WifLTkxf979P07/L1Um12uU4pWN3WWf0a6HeXRcrFmbTDZDNH+fQEVLS34sLLdn37wDkvUXy1lF5N2M+k/+0zW2N1iH9zFh9//QEa/rbYjih/88MdLlSOGOjLaKFYjraGSjG4axc21wWQzRPv3BVR4yrJzEFk2+y4rey/zRSu7mfxf+fPBFT60f/r1LKq2c+2PvM7P5qK08Kzp6uiKVSYYKslos7ixNhgbTcUxOT/60Jk0EAECIkBABAiIAAERICACBESAgAgQEAECIkBABAiIAAERICACBESAgAgQEAECIkBABAiIAAERICACBESAgAgQEAECIkBABAiIAAERICACBESAgAgQEAECIkBABAiIAAERICACBESAgAgQEAECIkBABAjo/yfxhe8VujvtAAAAAElFTkSuQmCC" /><!-- --></p>
<p><br></p>
<p>You can simplify the jagged outlines of the ward using <code>st_simplify()</code>. The final step is to transform the projection to EPSG:4326 (<a href="https://epsg.io/4326" class="uri">https://epsg.io/4326</a>).</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a>shp &lt;-<span class="st"> </span>shp <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">st_simplify</span>(<span class="dt">dTolerance =</span> <span class="dv">25</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">st_transform</span>(<span class="dv">4326</span>)</span>
<span id="cb5-2"><a href="#cb5-2"></a>shp </span>
<span id="cb5-3"><a href="#cb5-3"></a><span class="co">#&gt; Simple feature collection with 1 feature and 0 fields</span></span>
<span id="cb5-4"><a href="#cb5-4"></a><span class="co">#&gt; geometry type:  POLYGON</span></span>
<span id="cb5-5"><a href="#cb5-5"></a><span class="co">#&gt; dimension:      XY</span></span>
<span id="cb5-6"><a href="#cb5-6"></a><span class="co">#&gt; bbox:           xmin: -3.199973 ymin: 55.95726 xmax: -3.162921 ymax: 55.97507</span></span>
<span id="cb5-7"><a href="#cb5-7"></a><span class="co">#&gt; geographic CRS: WGS 84</span></span>
<span id="cb5-8"><a href="#cb5-8"></a><span class="co">#&gt;                         geometry</span></span>
<span id="cb5-9"><a href="#cb5-9"></a><span class="co">#&gt; 1 POLYGON ((-3.162921 55.9633...</span></span>
<span id="cb5-10"><a href="#cb5-10"></a></span>
<span id="cb5-11"><a href="#cb5-11"></a>shp <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">ggplot</span>() <span class="op">+</span><span class="st"> </span><span class="kw">geom_sf</span>()</span></code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
<p><br></p>
</div>
<div id="export-shapefile" class="section level2">
<h2>4. Export shapefile</h2>
<p>The shapefile is now ready for use in OSMtidy. THe shapefile is exported using the <code>sf</code> function <code>st_write()</code>. When using OSMtidy, all the associated shapefile files need to be placed in the shapefile folder in the OSMtidy directory.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a>shp <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">st_write</span>(<span class="st">&quot;shapefiles/exampleEdinburgh.shp&quot;</span>, <span class="dt">delete_dsn =</span> <span class="ot">TRUE</span>, <span class="dt">delete_layer =</span> <span class="ot">TRUE</span>, <span class="dt">quiet =</span> <span class="ot">TRUE</span>)</span></code></pre></div>
<p><br></p>
<p>Now you’re ready to run OSMtidy! See Vignette 2 for a general walkthrough.</p>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
